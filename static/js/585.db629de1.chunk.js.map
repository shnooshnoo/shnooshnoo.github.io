{"version":3,"file":"static/js/585.db629de1.chunk.js","mappings":"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","sources":["common/constants.js","common/store/geometry.store.worker.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["export const PATHS = {\r\n  INDEX: '/',\r\n  PROCESSING: '/processing',\r\n  CREATE_GEOREFERENCE: '/create-georeference',\r\n  REVIEW_CREATE: '/review-create',\r\n  PREPARE_PACKAGE: '/prepare-package',\r\n  CONVERSION: '/prepare-package/conversion',\r\n  LAYERS: '/layers',\r\n  LEVELS: '/levels',\r\n  INVALID_PATH: '/*',\r\n};\r\n\r\nexport const ROUTE_NAME_BY_PATH = {\r\n  [PATHS.INDEX]: 'home',\r\n  [PATHS.PROCESSING]: 'processing',\r\n  [PATHS.CREATE_GEOREFERENCE]: 'create',\r\n  [PATHS.LAYERS]: 'create',\r\n  [PATHS.LEVELS]: 'create',\r\n  [PATHS.INVALID_PATH]: 'redirect',\r\n  [PATHS.REVIEW_CREATE]: 'create',\r\n  [PATHS.PREPARE_PACKAGE]: 'prepare.drawing.package',\r\n  [PATHS.CONVERSION]: 'create.indoor.map',\r\n};\r\n\r\nexport const TRUNCATE_FRACTION_DIGITS = 8;\r\n\r\nexport const HTTP_STATUS_CODE = {\r\n  ACCEPTED: 202,\r\n  OK: 200,\r\n  BAD_REQUEST: 400,\r\n  UNAUTHORIZED: 401,\r\n  FORBIDDEN: 403,\r\n  TOO_MANY_REQUESTS: 429,\r\n};","import { combine, featureCollection, polygon, union } from '@turf/turf';\r\nimport { TRUNCATE_FRACTION_DIGITS } from 'common/constants';\r\n\r\n// almost everything in this file was copied from proj4 package - https://github.com/proj4js.\r\n// which was working too slow for the number of calculations we needed to perform\r\n// code here is just a copy-paste of proj4 with minor perf optimizations and unnecessary code cut off\r\n// translateCoordinateInMetersIntoDegrees function here performs ~10 times faster than original transform function.\r\n\r\n// constants copied from https://github.com/proj4js/proj4js/blob/master/lib/constants/values.js\r\nconst D2R = 0.01745329251994329577;\r\nconst R2D = 57.29577951308232088;\r\nconst es = 0.006694379990141316;\r\nconst SPI = 3.14159265359;\r\n// default k0 copied from https://github.com/proj4js/proj4js/blob/master/lib/Proj.js\r\nconst k0 = 1.0;\r\nconst TWO_PI = Math.PI * 2;\r\n\r\nself.onmessage = function({ data }) { // eslint-disable-line no-restricted-globals\r\n  // wrapped this in try catch to ignore errors thrown by union function\r\n  // truncating coordinates in unionFixed vastly fixed it, but it still fails sometimes\r\n  try { postMessage(onMessage(data)); } catch {}\r\n};\r\n\r\nexport function onMessage(data) {\r\n  const { dwgLayers, polygonLayers, anchorPoint } = data;\r\n  const filteredPolygonLayers = polygonLayers.filter((layer) => dwgLayers.includes(layer.name));\r\n\r\n  if (filteredPolygonLayers.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const geometriesByType = splitPolygons(filteredPolygonLayers, anchorPoint.coordinates);\r\n  const combinedPolygons = combinePolygons(geometriesByType.polygons);\r\n  return [unionMultiPolygons(geometriesByType.multiPolygons.concat(combinedPolygons)), anchorPoint];\r\n}\r\n\r\nfunction splitPolygons(polygons, [lon, lat]) {\r\n  return polygons.reduce((acc, val) => {\r\n    if (val.geometry.type === 'MultiPolygon') {\r\n      acc.multiPolygons.push(convertMultiPolygonInMetersToDegrees(val.geometry, [lon, lat]));\r\n    } else if (val.geometry.type === 'Polygon') {\r\n      acc.polygons.push(convertPolygonInMetersToDegrees(val.geometry, [lon, lat]));\r\n    }\r\n    return acc;\r\n  }, {\r\n    multiPolygons: [],\r\n    polygons: [],\r\n  });\r\n}\r\n\r\nfunction convertMultiPolygonInMetersToDegrees(polygon, [lon, lat]) {\r\n  return {\r\n    type: polygon.type,\r\n    coordinates: polygon.coordinates.map((coordinates) => (\r\n      coordinates.map((innerCoordinates) => (\r\n        innerCoordinates.map(([lonMeters, latMeters]) => translateCoordinateInMetersIntoDegrees(lon, lat, [lonMeters, latMeters]))\r\n      ))\r\n    )),\r\n  };\r\n}\r\n\r\nfunction convertPolygonInMetersToDegrees(polygon, [lon, lat]) {\r\n  return {\r\n    type: polygon.type,\r\n    coordinates: polygon.coordinates.map((coordinates) => (\r\n      coordinates.map(([lonMeters, latMeters]) => translateCoordinateInMetersIntoDegrees(lon, lat, [lonMeters, latMeters]))\r\n    )),\r\n  };\r\n}\r\n\r\nfunction unionMultiPolygons(multiPolygons) {\r\n  if (multiPolygons.length === 0) {\r\n    throw new Error('no polygons provided!');\r\n  }\r\n  const stack = [...multiPolygons];\r\n  if (stack.length === 1) {\r\n    return unionFixed(stack[0], stack[0]).geometry;\r\n  }\r\n  while (stack.length > 1) {\r\n    const firstPolygon = stack.shift();\r\n    try {\r\n      stack[0] = unionFixed(stack[0], firstPolygon).geometry;\r\n    } catch {}\r\n  }\r\n\r\n  return stack[0];\r\n}\r\n\r\n// without truncating it often fails due to bugs in polygon-clipping transitive dependency\r\nfunction unionFixed(f1, f2) {\r\n  const polygonsUnion = union(f1, f2);\r\n  polygonsUnion.geometry.coordinates = truncateRecursively(polygonsUnion.geometry.coordinates);\r\n  return polygonsUnion;\r\n}\r\n\r\nfunction combinePolygons(polygons) {\r\n  const collection = featureCollection(polygons.map(p => polygon(p.coordinates)));\r\n  return combine(collection).features.map((c) => c.geometry);\r\n}\r\n\r\n// this function is simplified version of https://github.com/proj4js/proj4js/blob/master/lib/transform.js\r\nexport function translateCoordinateInMetersIntoDegrees(lon, lat, meters) {\r\n  const lat0 = lat * D2R;\r\n  const long0 = lon * D2R;\r\n  const { Qn, Zb, cgb, utg } = getConsts(es, k0, lat0);\r\n\r\n  let point = {x: meters[0], y: meters[1]};\r\n  point = inverse(point, long0, Qn, Zb, cgb, utg); // Convert Cartesian to longlat\r\n\r\n  point = {\r\n    x: point.x * R2D,\r\n    y: point.y * R2D,\r\n  };\r\n\r\n  return [truncateNumber(point.x), truncateNumber(point.y)];\r\n}\r\n\r\nfunction truncateRecursively(coordinates) {\r\n  if (typeof coordinates === 'number') {\r\n    return truncateNumber(coordinates);\r\n  }\r\n  return coordinates.map(truncateRecursively);\r\n}\r\n\r\nexport function truncateNumber(num) {\r\n  return parseFloat(num.toFixed(TRUNCATE_FRACTION_DIGITS));\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/projections/etmerc.js\r\nfunction getConsts(es, k0, lat0) {\r\n  const cgb = [];\r\n  const cbg = [];\r\n  const utg = [];\r\n  const gtu = [];\r\n\r\n  const f = es / (1 + Math.sqrt(1 - es));\r\n  const n = f / (2 - f);\r\n  let np = n;\r\n\r\n  cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\r\n  cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\r\n\r\n  np = np * n;\r\n  cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\r\n  cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\r\n\r\n  np = np * n;\r\n  cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\r\n  cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\r\n\r\n  np = np * n;\r\n  cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\r\n  cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\r\n\r\n  np = np * n;\r\n  cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\r\n  cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\r\n\r\n  np = np * n;\r\n  cgb[5] = np * (601676 / 22275);\r\n  cbg[5] = np * (444337 / 155925);\r\n\r\n  np = Math.pow(n, 2);\r\n  const Qn = k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\r\n\r\n  utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\r\n  gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\r\n\r\n  utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\r\n  gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\r\n\r\n  np = np * n;\r\n  utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\r\n  gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\r\n\r\n  np = np * n;\r\n  utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\r\n  gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\r\n\r\n  np = np * n;\r\n  utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\r\n  gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\r\n\r\n  np = np * n;\r\n  utg[5] = np * (-20648693 / 638668800);\r\n  gtu[5] = np * (212378941 / 319334400);\r\n\r\n  const Z = gatg(cbg, lat0);\r\n  const Zb = -Qn * (Z + clens(gtu, 2 * Z));\r\n\r\n  return {\r\n    Qn,\r\n    Zb,\r\n    cgb,\r\n    utg,\r\n  };\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/gatg.js\r\nfunction gatg(pp, B) {\r\n  const cos_2B = 2 * Math.cos(2 * B);\r\n  let i = pp.length - 1;\r\n  let h1 = pp[i];\r\n  let h2 = 0;\r\n  let h;\r\n\r\n  while (--i >= 0) {\r\n    h = -h2 + cos_2B * h1 + pp[i];\r\n    h2 = h1;\r\n    h1 = h;\r\n  }\r\n\r\n  return (B + h * Math.sin(2 * B));\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/projections/etmerc.js\r\nfunction inverse(p, long0, Qn, Zb, cgb, utg) {\r\n  const a = 6378137;\r\n  const x0 = 0;\r\n  const y0 = 0;\r\n\r\n  let Ce = (p.x - x0) * (1 / a);\r\n  let Cn = (p.y - y0) * (1 / a);\r\n\r\n  Cn = (Cn - Zb) / Qn;\r\n  Ce = Ce / Qn;\r\n\r\n  let lon;\r\n  let lat;\r\n\r\n  if (Math.abs(Ce) <= 2.623395162778) {\r\n    const tmp = clens_cmplx(utg, 2 * Cn, 2 * Ce);\r\n\r\n    Cn = Cn + tmp[0];\r\n    Ce = Ce + tmp[1];\r\n    Ce = Math.atan(sinh(Ce));\r\n\r\n    const sin_Cn = Math.sin(Cn);\r\n    const cos_Cn = Math.cos(Cn);\r\n    const sin_Ce = Math.sin(Ce);\r\n    const cos_Ce = Math.cos(Ce);\r\n\r\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\r\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\r\n\r\n    lon = adjust_lon(Ce + long0);\r\n    lat = gatg(cgb, Cn);\r\n  } else {\r\n    lon = Infinity;\r\n    lat = Infinity;\r\n  }\r\n\r\n  p.x = lon;\r\n  p.y = lat;\r\n\r\n  return p;\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/sign.js\r\nfunction sign(x) {\r\n  return x < 0 ? -1 : 1;\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/cosh.js\r\nfunction cosh(x) {\r\n  let r = Math.exp(x);\r\n  r = (r + 1 / r) / 2;\r\n  return r;\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/clens.js\r\nfunction clens(pp, arg_r) {\r\n  const r = 2 * Math.cos(arg_r);\r\n  let i = pp.length - 1;\r\n  let hr1 = pp[i];\r\n  let hr2 = 0;\r\n  let hr;\r\n\r\n  while (--i >= 0) {\r\n    hr = -hr2 + r * hr1 + pp[i];\r\n    hr2 = hr1;\r\n    hr1 = hr;\r\n  }\r\n\r\n  return Math.sin(arg_r) * hr;\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/adjust_lon.js\r\nfunction adjust_lon(x) {\r\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/hypot.js\r\nfunction hypot(x, y) {\r\n  x = Math.abs(x);\r\n  y = Math.abs(y);\r\n  const a = Math.max(x, y);\r\n  const b = Math.min(x, y) / (a ? a : 1);\r\n\r\n  return a * Math.sqrt(1 + Math.pow(b, 2));\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/sinh.js\r\nfunction sinh(x) {\r\n  let r = Math.exp(x);\r\n  r = (r - 1 / r) / 2;\r\n  return r;\r\n}\r\n\r\n// https://github.com/proj4js/proj4js/blob/master/lib/common/clens_cmplx.js\r\nfunction clens_cmplx(pp, arg_r, arg_i) {\r\n  const sin_arg_r = Math.sin(arg_r);\r\n  const cos_arg_r = Math.cos(arg_r);\r\n  const sinh_arg_i = sinh(arg_i);\r\n  const cosh_arg_i = cosh(arg_i);\r\n  let r = 2 * cos_arg_r * cosh_arg_i;\r\n  let i = -2 * sin_arg_r * sinh_arg_i;\r\n  let j = pp.length - 1;\r\n  let hr = pp[j];\r\n  let hi1 = 0;\r\n  let hr1 = 0;\r\n  let hi = 0;\r\n  let hr2;\r\n  let hi2;\r\n\r\n  while (--j >= 0) {\r\n    hr2 = hr1;\r\n    hi2 = hi1;\r\n    hr1 = hr;\r\n    hi1 = hi;\r\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\r\n    hi = -hi2 + i * hr1 + r * hi1;\r\n  }\r\n\r\n  r = sin_arg_r * cosh_arg_i;\r\n  i = cos_arg_r * sinh_arg_i;\r\n\r\n  return [r * hr - i * hi, r * hi + i * hr];\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [845], function() { return __webpack_require__(9585); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"252b4179\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t585: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkmanifest_tool\"] = self[\"webpackChunkmanifest_tool\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(845).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["PATHS","D2R","R2D","SPI","TWO_PI","Math","PI","unionMultiPolygons","multiPolygons","length","Error","stack","unionFixed","geometry","firstPolygon","shift","f1","f2","polygonsUnion","union","coordinates","truncateRecursively","translateCoordinateInMetersIntoDegrees","lon","lat","meters","long0","es","k0","lat0","cgb","cbg","utg","gtu","f","sqrt","n","np","pow","Qn","Z","gatg","Zb","pp","arg_r","hr","r","cos","i","hr1","hr2","sin","clens","getConsts","point","x","y","p","a","x0","y0","Ce","Cn","abs","tmp","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","cosh_arg_i","exp","cosh","j","hi1","hi","clens_cmplx","atan","sin_Cn","cos_Cn","sin_Ce","cos_Ce","atan2","max","b","min","hypot","sign","Infinity","inverse","truncateNumber","map","num","parseFloat","toFixed","B","h","cos_2B","h1","h2","self","onmessage","data","postMessage","dwgLayers","polygonLayers","anchorPoint","filteredPolygonLayers","filter","layer","includes","name","geometriesByType","polygons","reduce","acc","val","type","push","polygon","innerCoordinates","lonMeters","latMeters","convertMultiPolygonInMetersToDegrees","convertPolygonInMetersToDegrees","splitPolygons","combinedPolygons","collection","featureCollection","combine","features","c","combinePolygons","concat","onMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","fulfilled","Object","keys","every","key","splice","d","definition","o","defineProperty","enumerable","get","e","chunkId","Promise","all","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}